---
title: "Linear Regression"
author: "Darya Vanichkina"
exercises: 0
keypoints: somepoint
objectives: someobjective
questions: What is the meaning of life FIXME?
source: Rmd
start: 0
teaching: 30
bibliography: references.bib
---

First, let's load the required libraries. We will use the `caret` library for our ML tasks, and the `tidyverse` for general data processing and visualisation.

```{r loadLibraries}
library(tidyverse)
library(caret)
library(naniar) # for visualising missing data

```

We will use the Ames housing data to explore different ML approaches to regression. This dataset was designed by Dean De Cock [@de2011ames] as an alternative to the "classic" Boston housing dataset, and has been extensively used in  ML teaching. It is also available from kaggle as part of its [advanced regression practice competition](https://www.kaggle.com/c/house-prices-advanced-regression-techniques).

The Ames Housing Data Documentation file describes the independent variables presented in the data. This includes:
- 20 continuous variables relate to various area dimensions for each observation
- 14 discrete variables, which typically quantify the number of items occurring within the house
- 23 ordinal, 23 nominal categorical variables, with 2 (STREET: gravel or paved) - 28 (NEIGHBORHOOD) classes 


```{r loadData}
ameshousing <- read_csv("data/AmesHousing.csv", guess_max=1500)
```

## Exploratory data analysis

```{r dim}
dim(ameshousing)
```

```{r str}
str(ameshousing)
```


```{r missingdata}
colSums(sapply(ameshousing, is.na)) %>% 
  as.data.frame() %>% 
  rename(Missing = ".") %>%
  tibble::rownames_to_column()%>% 
  arrange(desc(Missing))
```

### Use the naniar library to visualise missing

Some new visualisation for missing data in the tidy context has been proposed [@tierney2018expanding]. See this [web page](http://naniar.njtierney.com/articles/naniar-visualisation.html) for more options for your own data.

```{r uninformativeMissing}
gg_miss_var(ameshousing)
```

```{r naniar}
gg_miss_upset(ameshousing)
```

## EDA of outcome variable

```{r salesPrice}
ameshousing %>% 
  select(SalePrice) %>%
  ggplot(aes(x = SalePrice)) + geom_histogram(bins = 50) + theme_minimal()
```

```{r ScatterFindOutliers}
ameshousing %>%
  select(SalePrice, `Gr Liv Area`) %>%
  ggplot(aes(x = `Gr Liv Area`, y = SalePrice)) + geom_point() + theme_minimal() +
  geom_smooth(method= "lm")

```

```{r RemoveOutliers}
# remove 5 observations
ameshousingFilt <- 
  ameshousing %>% 
  filter(`Gr Liv Area` <= 4000)
```

Explore the variance:

```{r varianceExplore}
ameshousing %>%
  mutate()

```





## Splitting into testing and training datasets

We will use t


FIXME: (a plot of SALE PRICE versus GR LIV AREA will quickly indicate these points). Three of them are true outliers (Partial Sales that likely donâ€™t represent actual market values) and two of them are simply unusual sales (very large houses priced relatively appropriately). I would recommend removing any houses with more than 4000 square feet from the data set

FIXME: when we do train/test split, do so by ordering houses by price and then holding out the ith one.




```

## References


  
  